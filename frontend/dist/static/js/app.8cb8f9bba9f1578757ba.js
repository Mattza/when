webpackJsonp([1],{12:function(e,n,t){"use strict";var i=t(50),o=t.n(i),s=t(49),a=t.n(s),r=t(14),u=t(13),c=t(25);u.a.use(c.c);var d=new c.c.Store({state:{unhandledQuestions:[],wikiQuestions:[],ignoredQuestionIndexes:[],activeYear:"2016",highScore:0,playround:{}},getters:{activeWikiQuestion:function(e){return console.log("activeWikiQuestion",e.wikiQuestions.length,e.ignoredQuestionIndexes.length),e.wikiQuestions.filter(function(n,t){return!e.ignoredQuestionIndexes.includes(t)})||[]}},mutations:{setWikiQuestions:function(e,n){e.wikiQuestions=n},setIgnoredWikiQuestion:function(e,n){e.ignoredQuestionIndexes=n},setActiveYear:function(e,n){e.activeYear=n},addIgnoredWikiQuestion:function(e,n){console.log(n)},initPlayround:function(e,n){for(var t=[];n.length;){var i=Math.floor(Math.random()*n.length);t.push(n.splice(i,1)[0])}var o=t.splice(0,1);e.playround={shuffledQuestions:t,answeredQuestions:o,active:!0,failed:!1}},guessPlayround:function(e,n){e.playround.answeredQuestions.splice(n,0,e.playround.shuffledQuestions[0]);var t=!0,i=void 0;e.playround.answeredQuestions.forEach(function(e){i>e.year&&(t=!1),i=e.year}),t?e.playround.shuffledQuestions.splice(0,1):(e.playround.failed=!0,e.highScore=Math.max(e.highScore,e.playround.answeredQuestions.length-1))}},actions:{getWikiQuestions:function(e,n){var t=this,i=e.commit,s=e.state;return a()(o.a.mark(function e(){var a,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i("setActiveYear",n),e.next=3,fetch("/api/wiki/"+s.activeYear);case 3:return e.next=5,e.sent.json();case 5:return a=e.sent.data,console.log(a),e.next=9,fetch("/api/ignoredWiki/year="+s.activeYear);case 9:return e.next=11,e.sent.json();case 11:u=e.sent,i(r.a.mutations.setIgnoredWikiQuestion,u.map(function(e){return e.number})),i(r.a.mutations.setWikiQuestions,a);case 14:case"end":return e.stop()}},e,t)}))()},addIgnoredWikiQuestion:function(e,n){var t=this,i=e.commit,s=e.state;return a()(o.a.mark(function e(){var a,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.wikiQuestions.indexOf(n),e.next=3,fetch("/api/ignoredWiki",{method:"post",body:{number:a,year:s.activeYear}});case 3:return e.next=5,e.sent.json();case 5:u=e.sent,i(r.a.mutations.addIgnoredWikiQuestion,u);case 7:case"end":return e.stop()}},e,t)}))()},getIgnoredWikiQuestion:function(e,n){var t=this,i=e.commit;e.state;return a()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.t1=r.a.mutations.setIgnoredWikiQuestion,e.next=4,fetch("/api/ignoredWiki");case 4:return e.next=6,e.sent.json();case 6:e.t2=e.sent,(0,e.t0)(e.t1,e.t2);case 8:case"end":return e.stop()}},e,t)}))()},getPlayround:function(e,n){var t=this,i=e.commit;e.state;return a()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/question");case 2:return e.next=4,e.sent.json();case 4:n=e.sent,i("initPlayround",n);case 6:case"end":return e.stop()}},e,t)}))()}}});n.a=d},14:function(e,n,t){"use strict";n.a={mutations:{setWikiQuestions:"setWikiQuestions",setIgnoredWikiQuestion:"setIgnoredWikiQuestion",addIgnoredWikiQuestion:"addIgnoredWikiQuestion"},actions:{getWikiQuestions:"getWikiQuestions",addIgnoredWikiQuestion:"addIgnoredWikiQuestion",getIgnoredWikiQuestion:"getIgnoredWikiQuestion"}}},41:function(e,n,t){"use strict";var i=t(13),o=t(96),s=t(91),a=t.n(s),r=t(92),u=t.n(r);i.a.use(o.a),n.a=new o.a({routes:[{path:"/",name:"Play",component:u.a},{path:"/admin",name:"Hello",component:a.a}]})},42:function(e,n,t){function i(e){t(86)}var o=t(24)(t(44),t(93),i,null,null);e.exports=o.exports},43:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(13),o=t(12),s=t(42),a=t.n(s),r=t(41);i.a.config.productionTip=!1,new i.a({el:"#app",store:o.a,router:r.a,render:function(e){return e(a.a)}})},44:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"app"}},45:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(27),o=t.n(i),s=t(12),a=t(14),r=t(25);n.default={name:"hello",data:function(){return{year:"2016"}},computed:o()({},t.i(r.a)([]),t.i(r.b)(["activeWikiQuestion"])),methods:{getUnhandledQuestions:function(){s.a.dispatch(a.a.actions.getUnhandledQuestions)},getWikiQuestions:function(){s.a.dispatch(a.a.actions.getWikiQuestions,this.year)},ignoreWikiQuestion:function(e){s.a.dispatch("addIgnoredWikiQuestion",e)}}}},46:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(27),o=t.n(i),s=t(12),a=t(14),r=t(25);n.default={name:"play",data:function(){return{year:"2016"}},computed:o()({},t.i(r.a)(["playround","highScore"]),t.i(r.b)(["activeWikiQuestion"])),methods:{getUnhandledQuestions:function(){s.a.dispatch(a.a.actions.getUnhandledQuestions)},getWikiQuestions:function(){s.a.dispatch(a.a.actions.getWikiQuestions,this.year)},ignoreWikiQuestion:function(e){s.a.dispatch("addIgnoredWikiQuestion",e)},click:function(e){s.a.commit("guessPlayround",e)},startNewRound:function(){s.a.dispatch("getPlayround")}},beforeMount:function(){s.a.playround&&s.a.playround.active||this.startNewRound()}}},86:function(e,n){},87:function(e,n){},88:function(e,n){},91:function(e,n,t){function i(e){t(88)}var o=t(24)(t(45),t(95),i,"data-v-d1a58bfa",null);e.exports=o.exports},92:function(e,n,t){function i(e){t(87)}var o=t(24)(t(46),t(94),i,"data-v-7ac08513",null);e.exports=o.exports},93:function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]}},94:function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.playround.active?t("div",{staticClass:"board",class:e.playround.failed?"failed":""},[t("div",{staticClass:"question"},[e.playround.failed?[t("p",[e._v("Där blev det tokigt :( ")]),e._v(" "),t("p",[e._v("Ditt resultat: "+e._s(e.playround.answeredQuestions.length-1))]),e._v(" "),t("p",[e._v("Ditt highScore: "+e._s(e.highScore))]),e._v(" "),t("button",{on:{click:e.startNewRound}},[e._v("Spela igen")])]:e._e(),e._v(" "),e.playround.failed?e._e():[t("h3",[e._v("Nästa fråga:")]),e._v(" "),t("p",[e._v(e._s(e.playround.shuffledQuestions[0].question))]),e._v(" "),t("p",[e._v("Din nuvarande poäng: "+e._s(e.playround.answeredQuestions.length)+"\n    ")])]],2),e._v(" "),t("h3",[e._v("Placera in de här:")]),e._v(" "),t("ul",[t("li",[t("button",{on:{click:function(n){e.click(0)}}},[e._v("Innan")])]),e._v(" "),e._l(e.playround.answeredQuestions,function(n,i){return[t("li",{key:n.question},[e._v("\n        "+e._s(n.year)+" - "+e._s(n.question)+"\n      ")]),e._v(" "),t("li",{key:n.question},[t("button",{on:{click:function(n){e.click(i+1)}}},[e._v(e._s(e.playround.answeredQuestions.length-1===i?"Efter":"Mellan"))])])]})],2)]):e._e()},staticRenderFns:[]}},95:function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"hello"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],domProps:{value:e.year},on:{input:function(n){n.target.composing||(e.year=n.target.value)}}}),e._v(" "),t("button",{on:{click:e.getWikiQuestions}},[e._v("Click")]),e._v(" "),e._l(e.activeWikiQuestion,function(n){return t("div",{key:n,staticClass:"questionList"},[e._v("\n    "+e._s(n)+"\n    "),t("button",{on:{click:function(t){e.ignoreWikiQuestion(n)}}},[e._v("Ta bort")])])}),e._v("\n  "+e._s(e.activeWikiQuestion)+"\n")],2)},staticRenderFns:[]}}},[43]);
//# sourceMappingURL=app.8cb8f9bba9f1578757ba.js.map